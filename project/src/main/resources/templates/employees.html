<!-- employees.html -->
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Employee Management</title>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            fetch('http://localhost:8080/api/employees')
			.then(response => {
				
			        if (!response.ok) {
			            throw new Error(`HTTP error! status: ${response.status}`);
			        }
			        return response.json();
			    })
                .then(data => {
					console.log('Response data:', data);
					if (!Array.isArray(data)) {
					            throw new Error('Unexpected response format');
					        }
                    const tableBody = document.getElementById('employeeTableBody');
                    tableBody.innerHTML = ''; // Clear existing rows
					console.log('Employees:', data);
                    data.forEach(employee => {
						console.log(`Employee ID: ${employee.idEmployee}, Name: ${employee.skills || 'N/A'}`);
                        const row = `<tr>
                            <td>${employee.idEmployee}</td>
                            <td>${employee.skills}</td>
                            <td>${employee.status}</td>
                            <td>${employee.role}</td>
                            <td>
                                <button onclick="deleteEmployee(${employee.idEmployee})">Delete</button>
                            </td>
                        </tr>`;
                        tableBody.innerHTML += row;
                    });
                });
        });

        
    </script>
</head>
<body>
    <h1>Employee Management</h1>
    <table border="1">
        <thead>
            <tr>
				<th>ID</th>
				<th>Skills</th>
				<th>Status</th>
				<th>Role</th>

            </tr>
        </thead>
        <tbody id="employeeTableBody">
            <!-- JavaScript will populate this -->
        </tbody>
    </table>
</body>
</html>
